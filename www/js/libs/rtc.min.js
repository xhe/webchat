!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.RTC=n()}}(function(){return function n(e,t,r){function o(c,u){if(!t[c]){if(!e[c]){var a="function"==typeof require&&require;if(!u&&a)return a(c,!0);if(i)return i(c,!0);var s=new Error("Cannot find module '"+c+"'");throw s.code="MODULE_NOT_FOUND",s}var f=t[c]={exports:{}};e[c][0].call(f.exports,function(n){var t=e[c][1][n];return o(t?t:n)},f,f.exports,n,e,t,r)}return t[c].exports}for(var i="function"==typeof require&&require,c=0;c<r.length;c++)o(r[c]);return o}({1:[function(n,e,t){e.exports={constraints:{video:!0,audio:!0},signaller:"https://switchboard.rtc.io/",room:void 0,ice:[],channels:{},localContainer:"#l-video",remoteContainer:"#r-video",plugins:[],options:{}}},{}],2:[function(n,e,t){function r(n){return function(e){e.dataset.peer=n}}function o(n,e){m(e)("capture",["constraints","options"],l)("attach",["capture","options"],f.local)("render-local",["attach"],d([h("+rtc"),h("+localvideo"),v.to((e||{}).localContainer||"#l-video")]))("start-conference",["capture"],n.addStream).on("error",u(n,e))}function i(n,e){return function(t,o){m(s({stream:o},e))("attach",["stream","options"],f)("render-remote",["attach"],d([h("+rtc"),h("+remotevideo"),r(t),v.to((e||{}).remoteContainer||"#r-video")])).on("error",u(n,e))}}function c(n){g('[data-peer="'+n+'"]').forEach(function(n){n.parentNode.removeChild(n)})}function u(n,e){return function(n){console.error(n)}}var a=n("cog/defaults"),s=n("cog/extend"),f=n("rtc-attach"),l=n("rtc-capture"),p=n("rtc-quickconnect"),d=n("whisk/chain"),v=n("fdom/append"),h=n("fdom/classtweak"),g=n("fdom/qsa"),m=n("kgo");e.exports=function(e){var t;return e=a({},e,n("./defaultconfig.js")),e.options=s({room:e.room,ice:e.ice,plugins:e.plugins,expectedLocalStreams:e.constraints?1:0},e.options),t=p(e.signaller,e.options),t.on("call:ended",c).on("stream:added",i(t,e)),Object.keys(e.channels||{}).forEach(function(n){var r=e.channels[n];t.createDataChannel(n,r===!0?null:r)}),e.constraints&&o(t,e),t}},{"./defaultconfig.js":1,"cog/defaults":5,"cog/extend":6,"fdom/append":11,"fdom/classtweak":12,"fdom/qsa":13,kgo:14,"rtc-attach":16,"rtc-capture":17,"rtc-quickconnect":22,"whisk/chain":69}],3:[function(n,e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function o(n){return"function"==typeof n}function i(n){return"number"==typeof n}function c(n){return"object"==typeof n&&null!==n}function u(n){return void 0===n}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(n){if(!i(n)||0>n||isNaN(n))throw TypeError("n must be a positive number");return this._maxListeners=n,this},r.prototype.emit=function(n){var e,t,r,i,a,s;if(this._events||(this._events={}),"error"===n&&(!this._events.error||c(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(t=this._events[n],u(t))return!1;if(o(t))switch(arguments.length){case 1:t.call(this);break;case 2:t.call(this,arguments[1]);break;case 3:t.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),a=1;r>a;a++)i[a-1]=arguments[a];t.apply(this,i)}else if(c(t)){for(r=arguments.length,i=new Array(r-1),a=1;r>a;a++)i[a-1]=arguments[a];for(s=t.slice(),r=s.length,a=0;r>a;a++)s[a].apply(this,i)}return!0},r.prototype.addListener=function(n,e){var t;if(!o(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",n,o(e.listener)?e.listener:e),this._events[n]?c(this._events[n])?this._events[n].push(e):this._events[n]=[this._events[n],e]:this._events[n]=e,c(this._events[n])&&!this._events[n].warned){var t;t=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,t&&t>0&&this._events[n].length>t&&(this._events[n].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[n].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(n,e){function t(){this.removeListener(n,t),r||(r=!0,e.apply(this,arguments))}if(!o(e))throw TypeError("listener must be a function");var r=!1;return t.listener=e,this.on(n,t),this},r.prototype.removeListener=function(n,e){var t,r,i,u;if(!o(e))throw TypeError("listener must be a function");if(!this._events||!this._events[n])return this;if(t=this._events[n],i=t.length,r=-1,t===e||o(t.listener)&&t.listener===e)delete this._events[n],this._events.removeListener&&this.emit("removeListener",n,e);else if(c(t)){for(u=i;u-->0;)if(t[u]===e||t[u].listener&&t[u].listener===e){r=u;break}if(0>r)return this;1===t.length?(t.length=0,delete this._events[n]):t.splice(r,1),this._events.removeListener&&this.emit("removeListener",n,e)}return this},r.prototype.removeAllListeners=function(n){var e,t;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[n]&&delete this._events[n],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(t=this._events[n],o(t))this.removeListener(n,t);else for(;t.length;)this.removeListener(n,t[t.length-1]);return delete this._events[n],this},r.prototype.listeners=function(n){var e;return e=this._events&&this._events[n]?o(this._events[n])?[this._events[n]]:this._events[n].slice():[]},r.listenerCount=function(n,e){var t;return t=n._events&&n._events[e]?o(n._events[e])?1:n._events[e].length:0}},{}],4:[function(n,e,t){function r(){if(!u){u=!0;for(var n,e=c.length;e;){n=c,c=[];for(var t=-1;++t<e;)n[t]();e=c.length}u=!1}}function o(){}var i=e.exports={},c=[],u=!1;i.nextTick=function(n){c.push(n),u||setTimeout(r,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=o,i.addListener=o,i.once=o,i.off=o,i.removeListener=o,i.removeAllListeners=o,i.emit=o,i.binding=function(n){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(n){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],5:[function(n,e,t){"use strict";e.exports=function(n){return n=n||{},[].slice.call(arguments,1).forEach(function(e){if(e)for(var t in e)void 0===n[t]&&(n[t]=e[t])}),n}},{}],6:[function(n,e,t){"use strict";e.exports=function(n){return[].slice.call(arguments,1).forEach(function(e){if(e)for(var t in e)n[t]=e[t]}),n}},{}],7:[function(n,e,t){e.exports=function(n){function e(e){return n[e]}function t(e,t){n[e]=t}function r(e){return delete n[e]}function o(){return Object.keys(n)}function i(){return Object.keys(n).map(function(e){return n[e]})}return"object"!=typeof n?n:{get:e,set:t,remove:r,delete:r,keys:o,values:i}}},{}],8:[function(n,e,t){"use strict";e.exports=function(n){var e,t,r,o="string"==typeof n||n instanceof String,i=/^\-?\d+\.?\d*$/;if(!o||n.length<2)return o&&i.test(n)?parseFloat(n):n;if("true"===n||"false"===n)return"true"===n;if("null"===n)return null;if(t=n.charAt(0),r=n.charAt(n.length-1),e="{"==t&&"}"==r||"["==t&&"]"==r||'"'==t&&'"'==r)try{return JSON.parse(n)}catch(n){}return i.test(n)?parseFloat(n):n}},{}],9:[function(n,e,t){"use strict";var r=[],o=[],i=[console],c=e.exports=function(n){function e(){return t=r.indexOf("*")>=0||r.indexOf(n)>=0}var t=e();return o[o.length]=e,function(){var e=[].slice.call(arguments);("string"==typeof e[0]||e[0]instanceof String)&&(e[0]=n+": "+e[0]),t&&i.forEach(function(n){n.log.apply(n,e)})}};c.reset=function(){return i=[],r=[],c.enable()},c.to=function(n){return i=i.concat(n||[]),c},c.enable=function(){return r=r.concat([].slice.call(arguments)),o.forEach(function(n){n()}),c}},{}],10:[function(n,e,t){"use strict";e.exports=function(n,e,t){function r(){n.apply(c,i||[]),u=Date.now()}var o,i,c,u=(t||{}).leading!==!1?0:Date.now(),a=(t||{}).trailing;return a=a||void 0===a,function(){var t=Date.now(),s=t-u;return clearTimeout(o),e>s?(i=[].slice.call(arguments,0),c=this,a&&(o=setTimeout(r,e-s))):(u=t,void n.apply(this,arguments))}}},{}],11:[function(n,e,t){"use strict";var r=e.exports=function(){return console.log("not yet implemented"),!1};r.to=function(n,e){function t(e){var t=n;return("string"==typeof t||t instanceof String)&&(t=document.querySelector(t)),t&&"function"==typeof t.appendChild?(t.appendChild(e),e):void 0}return e?t(e):t}},{}],12:[function(n,e,t){"use strict";var r=/[\s\,]\s*/,o={"+":"add","-":"remove","~":"toggle","!":"toggle"};e.exports=function(n,e){function t(n){return n.classList?(i.forEach(function(e){n.classList[e.op](e.cls)}),n):n}var i=n.trim().split(r).map(function(n){return{op:o[n.charAt(0)],cls:n.slice(1)}}).filter(function(n){return n.op});return e?t(e):t}},{}],13:[function(n,e,t){"use strict";var r=/^\.([\w\-]+)$/,o=/^#([\w\-]+)$/,i=/^[\w\-]+$/;e.exports=function(n,e){var t;return e=e||document,t=e===document&&o.test(n),t?[e.getElementById(RegExp.$1)]:Array.prototype.slice.call(r.test(n)?e.getElementsByClassName(RegExp.$1):i.test(n)?e.getElementsByTagName(n):e.querySelectorAll(n))}},{}],14:[function(n,e,t){function r(){function n(){if(e)throw"No tasks or defaults may be set after kgo is in flight";for(var o=0;"string"==typeof arguments[o];)o++;var i,c,s=Array.prototype.slice.call(arguments,0,o);if(s.length||s.push((r++).toString()+"__returnless"),"object"==typeof arguments[o]&&!Array.isArray(arguments[o])){var f=arguments[o];if(t)throw"Defaults may be defined only once per kgo";for(var l in f){if(l in u)throw"A task is already defined for "+l;a[l]=f[l]}return t=!0,n}if(Array.isArray(arguments[o])&&(i=arguments[o],o++),"function"==typeof arguments[o]&&(c=arguments[o]),"function"!=typeof c)throw new Error("No function provided for task number "+Object.keys(u).length+" ("+s+")");for(var p=0;p<s.length;p++)if(s[p]in a)throw"A default with the same name as this task ("+s[p]+") has already been set";return u[s]={names:s,args:i||[],fn:c},n}var e,t,r=0,u={},a={};for(var s in i.prototype)n[s]=i.prototype[s];return n.apply(null,arguments),c(function(){e=!0,o(u,a,n)}),n}var o=n("./run"),i=n("events").EventEmitter,c="function"==typeof setImmediate?setImmediate:setTimeout;e.exports=r},{"./run":15,events:3}],15:[function(n,e,t){function r(n,e,t){this._task=n,this._args=e,this._done=t}function o(n,e,t,o){var i=n.names,c=n.args,a=(n.fn,[]);if(c)for(var s=0;s<c.length;s++){var f=c[s],l=f.match(u);if(l&&(f=f.slice(1)),!(f in e))return;l||a.push(e[f])}var p=new r(n,a,function(n,e){o(i,n,e)});t(i),p.run()}function i(n,e,t){var r,c=!0;if(!t._complete){for(var u in n)c=!1,r=n[u],o(r,e,function(e){delete n[e]},function(r,o,c){if(!t._complete){if(o)return t._complete=!0,t.emit("error",o,r),void t.emit("complete");for(var u=0;u<r.length;u++)e[r[u]]=c[u];i(n,e,t)}});c&&(t._complete=!0,t.emit("complete"))}}function c(n,e,t){var r={};for(var o in n)r[o]=n[o];i(r,e,t)}var u=/^\!.+/;r.prototype.run=function(){var n,e=this;this._task.fn.apply(this,this._args.concat([function(t){var r=Array.prototype.slice.call(arguments,1);t?(n=!0,e.done(t)):n||e.done(null,r)}]))},r.prototype.done=function(n,e){return n?this._done(n):void this._done(null,e)},e.exports=c},{}],16:[function(n,e,t){var r=n("rtc-core/plugin"),o=n("cog/extend"),i=e.exports=function(n,e,t){function o(n,e){return(e||{}).muted&&(n.muted=!0,n.setAttribute("muted","")),(e||{}).mirror&&n.setAttribute("data-mirrored",!0),n}function i(e,t){var r=(t||{}).autoplay,i="audio",c=(t||{}).el||(t||{}).target,a=e&&"function"==typeof e.getVideoTracks;return a&&e.getVideoTracks().length>0&&(i="video"),c&&"function"!=typeof c.play&&(c=null),c=c||document.createElement(i),u&&u.createObjectURL?c.src=u.createObjectURL(n):c.srcObject?c.srcObject=n:c.mozSrcObject&&(c.mozSrcObject=n),(void 0===r||r)&&(c.setAttribute("autoplay",""),c.play()),o(c,t)}var c,u="undefined"!=typeof window&&window.URL;return"function"==typeof e&&(t=e,e={}),(c=r((e||{}).plugins))?c.init(e,function(r){return r?t(r):"function"!=typeof c.attach?t(new Error("plugin must support the attach function")):void t(null,o(c.attach(n,e),e))}):void t(null,i(n,e))};i.local=function(n,e,t){"function"==typeof e&&(t=e,e={}),i(n,o({muted:!0,mirror:!0},e),t)}},{"cog/extend":6,"rtc-core/plugin":21}],17:[function(n,e,t){var r=n("rtc-core/plugin"),o=n("rtc-core/detect");navigator.getUserMedia=navigator.getUserMedia||o.call(navigator,"getUserMedia"),e.exports=function(n,e,t){function o(n){t(null,n)}var i;return"function"==typeof e&&(t=e,e={}),(i=r((e||{}).plugins))?i.init(e,function(e){return e?t(e):"function"!=typeof navigator.getUserMedia?t(new Error("plugin does not support media capture")):void navigator.getUserMedia(n,o,t)}):"function"!=typeof navigator.getUserMedia?t(new Error("getUserMedia not supported")):void navigator.getUserMedia(n,o,t)}},{"rtc-core/detect":18,"rtc-core/plugin":21}],18:[function(n,e,t){"use strict";var r=n("detect-browser"),o=e.exports=function(n,e){var t,r,i,c=(e||{}).attach,u=this||("undefined"!=typeof window?window:void 0),a=((e||{}).prefixes||["ms","o","moz","webkit"]).concat("");if(u)for(t=a.length;t--;)if(r=a[t],i=r+(r?n.charAt(0).toUpperCase()+n.slice(1):n),"undefined"!=typeof u[i])return o.browser=o.browser||r.toLowerCase(),c&&(u[n]=u[i]),u[i]};o.moz="undefined"!=typeof navigator&&!!navigator.mozGetUserMedia,o.browser=r.name,o.browserVersion=o.version=r.version},{"detect-browser":20}],19:[function(n,e,t){e.exports=function(n,e){var t=(n||{}).ice,r=(n||{}).iceServers;return"function"==typeof t?t(n,e):Array.isArray(t)?e(null,[].concat(t)):void e(null,[].concat(r||[]))}},{}],20:[function(n,e,t){function r(n){return n.concat(n[1].exec(navigator.userAgent))}function o(n){return!!n[2]}for(var i=[["chrome",/Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+)\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/iPad\;\sCPU\sOS\s([0-9\._]+)/],["ios",/iPhone\;\sCPU\siPhone\sOS\s([0-9\._]+)/],["safari",/Safari\/([0-9\._]+)/]],r=i.map(r).filter(o)[0],c=r&&r[3].split(/[._]/).slice(0,3);c&&c.length<3;)c.push("0");t.name=r&&r[0],t.version=c&&c.join(".")},{}],21:[function(n,e,t){function r(n){return n&&"function"==typeof n.supported&&n.supported(i)}function o(n){var e=c.filter(function(e){return"function"==typeof n[e]});return e.length===c.length}var i=n("./detect"),c=["init"];e.exports=function(n){return[].concat(n||[]).filter(r).filter(o)[0]}},{"./detect":18}],22:[function(n,e,t){"use strict";var r=n("rtc-tools"),o=n("mbus"),i=n("rtc-core/plugin"),c=r.logger("rtc-quickconnect"),u=n("cog/extend");e.exports=function(e,t){function a(){clearTimeout(M),E||S&&(!F||m)&&g&&(D&&L.length<D||(M=setTimeout(function(){var n=u({room:k},A);w.announce(n),E=!0},0)))}function s(n){var e,i,a=b(n);a.room===k&&(T.end(n),e=r.createConnection(u({},t,{iceServers:g}),(t||{}).constraints),w("peer:connect",a.id,e,a),T.create(a.id,e),L.forEach(function(n){e.addStream(n)}),w.isMaster(a.id)?(c("is master, creating data channels: ",Object.keys(C)),Object.keys(C).forEach(function(n){l(e.createDataChannel(n,C[n]),e,a)})):e.ondatachannel=function(t){var r=t&&t.channel;r&&void 0!==C[r.label]&&l(r,e,b(n))},c("coupling "+w.id+" to "+a.id),i=r.couple(e,n,w,u({},t,{logger:o("pc."+n,w)})),w("peer:couple",n,e,a,i),i.once("connected",T.start.bind(null,n,e,a)),i.once("closed",T.end.bind(null,n)),w.isMaster(n)&&i.createOffer())}function f(n){var e=T.get(n);if(!e)throw new Error("No active call for peer: "+n);return e}function l(n,e,t){function r(){var r=T.get(t.id),i=[t.id,n,t,e];c('reporting channel "'+n.label+'" ready, have call: '+!!r),clearInterval(o),n.onopen=null,r&&r.channels.set(n.label,n),c("triggering channel:opened events for channel: "+n.label),w.apply(w,["channel:opened"].concat(i)),w.apply(w,["channel:opened:"+n.label].concat(i))}var o;return c("channel "+n.label+" discovered for peer: "+t.id),"open"===n.readyState?r():(c("channel not ready, current state = "+n.readyState),n.onopen=r,void(o=setInterval(function(){c("checking channel state, current state = "+n.readyState),"open"===n.readyState&&r()},500)))}function p(){return F&&F.init(t,function(n){return n?console.error("Could not initialize plugin: ",n):(m=!0,void a())})}function d(n){n&&"undefined"!=typeof n.room&&(k=n.room)}function v(n,e){e.allow=e.allow&&L.length>=D}function h(n){var e=n&&n.id,t=e&&T.get(e);return e&&!t?(c("received peer update from peer "+e+", no active calls"),w.to(e).send("/reconnect"),s(e)):void 0}var g,m,y="undefined"!=typeof location&&location.hash.slice(1),w=n("rtc-pluggable-signaller")(u({signaller:e,endpoints:["/","/primus"]},t)),b=n("./lib/getpeerdata")(w.peers),x=(t||{}).ns||"",k=(t||{}).room,_=(t||{}).debug,S=!(t||{}).manualJoin,A={},E=!1,L=[],T=w.calls=n("./lib/calls")(w,t),C={},O=w.plugins=(t||{}).plugins||[],F=i(O),D=parseInt((t||{}).expectedLocalStreams,10)||0,M=0,j=0;return k||("undefined"==typeof location||y||(y=location.hash=""+Math.pow(2,53)*Math.random()),k=x+"#"+y),_&&r.logger.enable.apply(r.logger,Array.isArray(c)?_:["*"]),w.on("peer:announce",function(n){s(n.id)}),w.on("peer:update",h),w.on("message:reconnect",function(n){s(n.id)}),w.broadcast=w.addStream=function(n){return L.push(n),T.values().forEach(function(e){e.pc.addStream(n)}),a(),w},w.endCalls=function(){T.keys().forEach(T.end)},w.close=function(){w.endCalls(),w.leave()},w.createDataChannel=function(n,e){return T.keys().forEach(function(t){var r,o=T.get(t);o&&o.pc&&w.isMaster(t)&&(r=o.pc.createDataChannel(n,e),l(r,o.pc,b(t)))}),C[n]=e||null,w},w.join=function(){S=!0,a()},w.get=function(n){return A[n]},w.getLocalStreams=function(){return[].concat(L)},w.reactive=function(){return t=t||{},t.reactive=!0,w},w.removeStream=function(n){var e=L.indexOf(n);return T.values().forEach(function(e){e.pc.removeStream(n)}),e>=0&&L.splice(e,1),w},w.requestChannel=function(n,e,t){var r=f(n),o=r&&r.channels.get(e);return o?(t(null,o),w):(w.once("channel:opened:"+e,function(n,e){t(null,e)}),w)},w.requestStream=function(n,e,t){function r(c){c===n&&(o=i.pc.getRemoteStreams()[e],o&&(w.removeListener("stream:added",r),t(null,o)))}var o,i=f(n);return(o=i.pc.getRemoteStreams()[e])?(t(null,o),w):(w.on("stream:added",r),w)},w.profile=function(n){return u(A,n),E&&(clearTimeout(j),j=setTimeout(function(){w.announce(A)},(t||{}).updateDelay||1e3)),w},w.waitForCall=function(n,e){var t=T.get(n);return t&&t.active?(e(null,t.pc),w):void w.on("call:started",function t(r){r===n&&(w.removeListener("call:started",t),e(null,T.get(r).pc))})},D&&w.on("peer:filter",v),w.on("local:announce",d),w.on("message:ping",T.ping),n("rtc-core/genice")(t,function(n,e){return n?console.error("could not find iceServers: ",n):(g=e,void a())}),F&&p(),w}},{"./lib/calls":23,"./lib/getpeerdata":24,"cog/extend":6,mbus:26,"rtc-core/genice":19,"rtc-core/plugin":21,"rtc-pluggable-signaller":27,"rtc-tools":60}],23:[function(n,e,t){(function(t){var r=n("rtc-tools"),o=r.logger("rtc-quickconnect"),i=n("rtc-tools/cleanup"),c=n("cog/getable");e.exports=function(e,r){function u(n,e){m.set(n,{active:!1,pc:e,channels:c({}),streams:[],lastping:Date.now()})}function a(n){return function(e){o("peer "+n+" added stream"),h(n),p(n)(e.stream)}}function s(n){return function(t){o("peer "+n+" removed stream"),h(n),e("stream:removed",n,t.stream)}}function f(n){var t=m.get(n);t&&(t.channels.keys().forEach(function(r){var o=t.channels.get(r),i=[n,o,r];e.apply(e,["channel:closed"].concat(i)),e.apply(e,["channel:closed:"+r].concat(i)),o.onopen=null}),t.streams.forEach(function(t){e("stream:removed",n,t)}),m.delete(n),0===m.keys().length&&d(),e("call:ended",n,t.pc),i(t.pc))}function l(n){var e=m.get(n&&n.id);e&&(e.lastping=Date.now())}function p(n){return function(t){e("stream:added",n,t,y(n))}}function d(){clearInterval(g),g=0}function v(i,c,u){var f=m.get(i),l=[].concat(c.getRemoteStreams());f.active=!0,f.streams=[].concat(c.getRemoteStreams()),c.onaddstream=a(i),c.onremovestream=s(i),o(e.id+" - "+i+" call start: "+l.length+" streams"),e("call:started",i,c,u),g=g||n("./heartbeat")(e,m,r),t.nextTick(function(){l.forEach(p(i))})}function h(n){var e=m.get(n);e&&e.pc&&(e.streams=[].concat(e.pc.getRemoteStreams()))}var g,m=c({}),y=n("./getpeerdata")(e.peers);return m.create=u,m.end=f,m.ping=l,m.start=v,m}}).call(this,n("_process"))},{"./getpeerdata":24,"./heartbeat":25,_process:4,"cog/getable":7,"rtc-tools":60,"rtc-tools/cleanup":56}],24:[function(n,e,t){e.exports=function(n){return function(e){var t=n.get(e);return t&&t.data}}},{}],25:[function(n,e,t){e.exports=function(n,e,t){function r(){var t=Date.now()-4*o;e.keys().forEach(function(r){var o=e.get(r);return o.lastping<t?e.end(r):void n.to(r).send("/ping")})}var o=(t||{}).heartbeat||2500;return o?setInterval(r,o):void 0}},{}],26:[function(n,e,t){var r=/[\.\:]/,o=e.exports=function(n,e,t){function i(e){var r,o=[].slice.call(arguments,1),c=a(e),u=p[c]||[];return d.forEach(function(n){n({name:c,args:o})}),r=[].concat(u).map(function(n){return n.apply(t||this,o)}),i.parent&&(r=r.concat(i.parent.apply(t||this,[(n?n+".":"")+c].concat(o)))),r}function c(n){n?delete p[a(n)]:p={}}function u(n){function e(){d.splice(d.indexOf(n),1)}return d.push(n),e}function a(n){return(Array.isArray(n)?n:n.split(r)).join(".")}function s(n,e){var t=p[a(n)]||[],r=t?t.indexOf(e._actual||e):-1;r>=0&&t.splice(r,1)}function f(n,e){var t;return n=a(n),t=p[n],t?t.push(e):p[n]=[e],i}function l(n,e){function t(){var r=e.apply(this,arguments);return i.off(n,t),r}return e._actual=t,f(n,t)}var p={},d=[];return"function"==typeof n&&(e=n,n=""),n=a(n||""),i.clear=i.removeAllListeners=c,i.feed=u,i.on=i.addListener=f,i.once=l,i.off=i.removeListener=s,i.parent=e||n&&o(),i}},{}],27:[function(n,e,t){e.exports=function(e){var t=(e||{}).signaller,r=(e||{}).messenger||n("rtc-switchboard-messenger");return"string"==typeof t||t instanceof String?n("rtc-signaller")(r(t,e),e):t}},{"rtc-signaller":28,"rtc-switchboard-messenger":47}],28:[function(n,e,t){"use strict";var r=(n("rtc-core/detect"),n("cog/extend"),n("mbus"),n("cog/getable"),n("cuid"),n("pull-stream")),o=(n("pull-pushable"),n("rtc-signal/prepare"),n("pull-pushable")),i=0,c=1,u=2,a={version:"6.2.1"};e.exports=function(e,t){function s(n){d.push(n),y!==i||void 0!==l&&!l||w()}function f(){(void 0===p||p)&&setTimeout(w,50)}var l=(t||{}).autoconnect,p=(t||{}).reconnect,d=o(),v=0,h=n("rtc-signal/signaller")(t,s),g=!1,m=0,y=i,w=h.connect=function(){y!==c&&(y=c,e(function(n,e,t){return n?(y=i,h("error",n)):(v+=1,y=u,r(e,r.through(null,function(){d=o(),y=i,h("disconnected")}),r.drain(h._process)),r(d,t),h.removeListener("disconnected",f),h.on("disconnected",f),h("connected"),void(g&&v>1&&h._announce()))}))};return h.announce=function(n){return g=!0,h._update(n),clearTimeout(m),m=setTimeout(h._announce,(t||{}).announceDelay||10)},h.leave=h.close=function(){h.send("/leave",{id:h.id}),h.removeListener("disconnected",f),h.removeListener("connected",h._announce),d.end(),y=i},h._update({agent:"signaller@"+a.version}),(void 0===l||l)&&w(),h}},{"cog/extend":6,"cog/getable":7,cuid:29,mbus:26,"pull-pushable":30,"pull-stream":37,"rtc-core/detect":18,"rtc-signal/prepare":44,"rtc-signal/signaller":46}],29:[function(n,e,t){!function(n){"use strict";var t="cuid",r=0,o=4,i=36,c=Math.pow(i,o),u=function(n,e){var t="000000000"+n;return t.substr(t.length-e)},a=function(){return u((Math.random()*c<<0).toString(i),o)},s=function(){return r=c>r?r:0,r++,r-1},f=function(){var n,e="c",t=(new Date).getTime().toString(i),r=f.fingerprint(),c=a()+a();return n=u(s().toString(i),o),e+t+n+r+c};f.slug=function(){var n,e=(new Date).getTime().toString(36),t=f.fingerprint().slice(0,1)+f.fingerprint().slice(-1),r=a().slice(-2);return n=s().toString(36).slice(-4),e.slice(-2)+n+t+r},f.globalCount=function(){var n=function(){var n,e=0;for(n in window)e++;return e}();return f.globalCount=function(){return n},n},f.fingerprint=function(){return u((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+f.globalCount().toString(36),4)},n.register?n.register(t,f):"undefined"!=typeof e?e.exports=f:n[t]=f}(this.applitude||this)},{}],30:[function(n,e,t){var r=n("pull-stream");e.exports=r.Source(function(n){function e(){for(var n;c.length&&((n=o.length)||r);){var e=o.shift(),t=i.shift();c.shift()(n?null:r,e),t&&t(r===!0?null:r)}}function t(t,o){r=r||t,c.push(o),e(),r&&n&&n(r===!0?null:r)}var r,o=[],i=[],c=[];return t.push=function(n,t){return r?t&&t(r===!0?null:r):(o.push(n),i.push(t),void e())},t.end=function(t,o){"function"==typeof t&&(o=t,t=!0),r=r||t||!0,o&&i.push(o),e(),r&&n&&n(r===!0?null:r)},t})},{"pull-stream":31}],31:[function(n,e,t){var r=n("./sources"),o=n("./sinks"),i=n("./throughs"),c=n("pull-core");for(var u in r)t[u]=c.Source(r[u]);for(var u in i)t[u]=c.Through(i[u]);for(var u in o)t[u]=c.Sink(o[u]);var a=n("./maybe")(t);for(var u in a)t[u]=a[u];t.Duplex=t.Through=t.pipeable=c.Through,t.Source=t.pipeableSource=c.Source,t.Sink=t.pipeableSink=c.Sink},{"./maybe":32,"./sinks":34,"./sources":35,"./throughs":36,"pull-core":33}],32:[function(n,e,t){var r=n("pull-core"),o=r.prop,i=r.id,c=r.maybeSink;e.exports=function(n){{var e={},t=n.drain,r=(e.find=function(n,e){return c(function(e){var r=!1;return e?n=o(n)||i:(e=n,n=i),t(function(t){return n(t)?(r=!0,e(null,t),!1):void 0},function(n){r||e(n===!0?null:n,null)})},e)},e.reduce=function(n,e,r){return c(function(r){return t(function(t){e=n(e,t)},function(n){r(n,e)})},r)});e.collect=e.writeArray=function(n){return r(function(n,e){return n.push(e),n},[],n)}}return e}},{"pull-core":33}],33:[function(n,e,t){function r(n){return"function"!=typeof n?n:(n.pipe=n.pipe||function(e){if("function"!=typeof e)throw new Error("must pipe to reader");return r(e(n))},n.type="Source",n)}t.id=function(n){return n},t.prop=function(n){if("string"==typeof n){var e=n;return function(n){return n[e]}}return n},t.tester=function(n){return n?"object"==typeof n&&"function"==typeof n.test?n.test.bind(n):t.prop(n)||t.id:t.id},t.addPipe=r;var o=(t.Source=function(n){function e(){var e=[].slice.call(arguments);return r(n.apply(null,e))}return e.type="Source",e},t.Through=function(n){return function(){function e(e){for(t.unshift(e),e=n.apply(null,t);r.length;)e=r.shift()(e);return e}var t=[].slice.call(arguments),r=[];return e.pipe=function(n){if(r.push(n),"Source"===n.type)throw new Error("cannot pipe "+e.type+" to Source");return e.type="Sink"===n.type?"Sink":"Through",e},e.type="Through",e}}),i=t.Sink=function(n){return function(){function e(e){return t.unshift(e),n.apply(null,t)}var t=[].slice.call(arguments);if(!n)throw new Error("must be createReader function");return e.type="Sink",e}};t.maybeSink=t.maybeDrain=function(n,e){return e?i(function(t){return n(e)(t)})():o(function(e){var t;return function(r,o){return r?e(r,o):t?o(t):void n(function(n,e){t=n||!0,n?o(t):o(null,e)})(e)}})()}},{}],34:[function(n,e,t){{var r=t.drain=function(n,e,t){!function r(){for(var o=!0,i=!1;o;)if(i=!1,n(null,function(c,u){i=!0,c?(o=!1,t&&t(c===!0?null:c)):e&&!1===e(u)?(o=!1,n(!0,t||function(){})):o||r()}),!i)return void(o=!1)}()};t.onEnd=function(n,e){return r(n,null,e)},t.log=function(n,e){return r(n,function(n){console.log(n)},e)}}},{}],35:[function(n,e,t){{var r=(t.keys=function(n){return o(Object.keys(n))},t.once=function(n){return function(e,t){if(e)return t(e);if(null!=n){var r=n;n=null,t(null,r)}else t(!0)}}),o=t.values=t.readArray=function(n){Array.isArray(n)||(n=Object.keys(n).map(function(e){return n[e]}));var e=0;return function(t,r){return t?r&&r(t):void r(e>=n.length||null,n[e++])}};t.count=function(n){var e=0;return n=n||1/0,function(t,r){return t?r&&r(t):e>n?r(!0):void r(null,e++)}},t.infinite=function(n){return n=n||Math.random,function(e,t){return e?t&&t(e):t(null,n())}},t.defer=function(){var n,e,t=[],r=function(r,o){n?n(r,o):(e=r,t.push(o))};return r.resolve=function(r){if(n)throw new Error("already resolved");if(n=r,!n)throw new Error("no read cannot resolve!"+n);for(;t.length;)n(e,t.shift())},r.abort=function(n){r.resolve(function(e,t){t(n||!0)})},r},t.empty=function(){return function(n,e){e(!0)}},t.depthFirst=function(n,e){var t=[];return t.unshift(r(n)),function n(r,o){return t.length?void t[0](r,function(r,i){return r?(t.shift(),n(null,o)):(t.unshift(e(i)),void o(r,i))}):o(!0)}},t.widthFirst=function(n,e){var t=[];return t.push(r(n)),function n(r,o){return t.length?void t[0](r,function(r,i){return r?(t.shift(),n(null,o)):(t.push(e(i)),void o(r,i))}):o(!0)}},t.leafFirst=function(n,e){var t=[],o=[];return t.push(r(n)),function n(r,i){t[0](r,function(r,c){return r?(t.shift(),o.length?i(null,o.shift()):i(!0)):(t.unshift(e(c)),o.unshift(c),void n(null,i))})}}}},{}],36:[function(n,e,t){(function(e){{var r=n("pull-core"),o=n("./sources"),i=n("./sinks"),c=r.prop,u=r.id,a=r.tester,s=(t.map=function(n,e){return e=c(e)||u,function(t,r){n(t,function(n,t){var t=n?null:e(t);r(n,t)})}},t.asyncMap=function(n,e){return e?function(t,r){return t?n(t,r):void n(null,function(n,t){return n?r(n,t):void e(t,r)})}:n},t.paraMap=function(n,e,t){function r(){if(i){var n=i;return i=null,u.length?n(null,u.shift()):c&&!a?n(c):void(i=n)}}function o(){n(null,function(n,i){return n?(c=n,r()):(a++,e(i,function(n,e){a--,u.push(e),r()}),void(t>a&&!c&&o()))})}if(!e)return n;var i,c=!1,u=[],a=0;return function(e,t){return e?n(e,t):(i=t,void(u.length||c?(o(),r()):o()))}},t.filter=function(n,e){return e=a(e),function t(r,o){n(r,function(n,r){return n||e(r)?void o(n,r):t(n,o)})}}),f=(t.filterNot=function(n,e){return e=a(e),s(n,function(n){return!e(n)})},t.through=function(n,e,t){function r(n){!o&&t&&(o=!0,t(n===!0?null:n))}var o=!1;return function(t,o){return t&&r(t),n(t,function(n,t){n?r(n):e&&e(t),o(n,t)})}},t.take=function(n,e){var t=!1;if("number"==typeof e){var r=e;e=function(){return r--}}return function(r,o){return t?o(t):(t=r)?n(t,o):void n(null,function(r,i){return(t=t||r)?o(t):void(e(i)?o(null,i):(t=!0,n(!0,function(n,e){o(t,e)})))})}},t.unique=function(n,e,t){e=c(e)||u;var r={};return s(n,function(n){var o=e(n);return r[o]?!!t:(r[o]=!0,!t)})}),l=(t.nonUnique=function(n,e){return f(n,e,!0)},t.group=function(n,e){var t;e=e||5;var r=[];return function(o,i){return o?n(t=o,i):t?i(t):void n(null,function o(c,u){if(t=t||c){if(!r.length)return i(t);var a=r;return r=[],i(null,a)}if(r.push(u),r.length<e)return n(null,o);var a=r;r=[],i(null,a)})}},t.flatten=function(n){var e;return function(t,r){function i(){e(null,function(n,e){n?c():r(null,e)})}function c(){n(null,function(n,t){if(n)return r(n);if(Array.isArray(t))t=o.values(t);else if("function"!=typeof t)throw new Error("expected stream of streams");e=t,i()})}e?i():c()}},t.prepend=function(n,e){return function(t,r){if(null!==e){if(t)return n(t,r);var o=e;e=null,r(null,o)}else n(t,r)}},t._reduce=function(n,e,t){return function(r,o){return r?n(r,o):ended?o(ended):void i.drain(function(n){t=e(t,n)},function(n,e){ended=n||!0,n?o(ended):o(null,t)})(n)}},e.nextTick);t.highWaterMark=function(n,e){function t(){for(;c.length&&(i.length||o);)c.shift()(o,o?null:i.shift())}function r(){return o||u||i.length>=e?void 0:(u=!0,n(o,function(n,e){u=!1,o=o||n,null!=e&&i.push(e),r(),t()}))}var o,i=[],c=[],u=!1;return e=e||10,l(r),function(n,e){o=o||n,c.push(e),r(),t()}}}}).call(this,n("_process"))},{"./sinks":34,"./sources":35,_process:4,"pull-core":33}],37:[function(n,e,t){function r(n){return"function"==typeof n}function o(n){return n&&("Through"===n.type||1===n.length)}var i=n("./sources"),c=n("./sinks"),u=n("./throughs"),a=n("pull-core"),t=e.exports=function n(){function e(){var n=t.shift();return null==n?e():r(n)?n:function(e){return n.sink(e),
n.source}}var t=[].slice.call(arguments);if(o(t[0]))return function(e){return t.unshift(e),n.apply(null,t)};var i=t.shift();for(r(i.source)&&(i=i.source);t.length;)i=e()(i);return i};for(var s in i)t[s]=a.Source(i[s]);for(var s in u)t[s]=a.Through(u[s]);for(var s in c)t[s]=a.Sink(c[s]);var f=n("./maybe")(t);for(var s in f)t[s]=f[s];t.Duplex=t.Through=t.pipeable=a.Through,t.Source=t.pipeableSource=a.Source,t.Sink=t.pipeableSink=a.Sink},{"./maybe":38,"./sinks":40,"./sources":41,"./throughs":42,"pull-core":39}],38:[function(n,e,t){var r=n("pull-core"),o=r.prop,i=r.id,c=r.maybeSink;e.exports=function(n){{var e={},t=n.drain,r=(e.find=function(n,e){return c(function(e){var r=!1;return e?n=o(n)||i:(e=n,n=i),t(function(t){return n(t)?(r=!0,e(null,t),!1):void 0},function(n){r||e(n===!0?null:n,null)})},e)},e.reduce=function(n,e,r){return c(function(r){return t(function(t){e=n(e,t)},function(n){r(n,e)})},r)});e.collect=e.writeArray=function(n){return r(function(n,e){return n.push(e),n},[],n)},e.concat=function(n){return r(function(n,e){return n+e},"",n)}}return e}},{"pull-core":39}],39:[function(n,e,t){arguments[4][33][0].apply(t,arguments)},{dup:33}],40:[function(n,e,t){{var r=t.drain=function(n,e,t){!function r(){for(var o=!0,i=!1;o;)if(i=!1,n(null,function(c,u){if(i=!0,c){if(o=!1,t)t(c===!0?null:c);else if(c&&c!==!0)throw c}else e&&!1===e(u)?(o=!1,n(!0,t||function(){})):o||r()}),!i)return void(o=!1)}()};t.onEnd=function(n,e){return r(n,null,e)},t.log=function(n,e){return r(n,function(n){console.log(n)},e)}}},{}],41:[function(n,e,t){{var r=(t.keys=function(n){return o(Object.keys(n))},t.once=function(n){return function(e,t){if(e)return t(e);if(null!=n){var r=n;n=null,t(null,r)}else t(!0)}}),o=t.values=t.readArray=function(n){Array.isArray(n)||(n=Object.keys(n).map(function(e){return n[e]}));var e=0;return function(t,r){return t?r&&r(t):void r(e>=n.length||null,n[e++])}};t.count=function(n){var e=0;return n=n||1/0,function(t,r){return t?r&&r(t):e>n?r(!0):void r(null,e++)}},t.infinite=function(n){return n=n||Math.random,function(e,t){return e?t&&t(e):t(null,n())}},t.defer=function(){var n,e,t=[],r=function(r,o){n?n(r,o):(e=r,t.push(o))};return r.resolve=function(r){if(n)throw new Error("already resolved");if(n=r,!n)throw new Error("no read cannot resolve!"+n);for(;t.length;)n(e,t.shift())},r.abort=function(n){r.resolve(function(e,t){t(n||!0)})},r},t.empty=function(){return function(n,e){e(!0)}},t.error=function(n){return function(e,t){t(n)}},t.depthFirst=function(n,e){var t=[];return t.unshift(r(n)),function n(r,o){return t.length?void t[0](r,function(r,i){return r?(t.shift(),n(null,o)):(t.unshift(e(i)),void o(r,i))}):o(!0)}},t.widthFirst=function(n,e){var t=[];return t.push(r(n)),function n(r,o){return t.length?void t[0](r,function(r,i){return r?(t.shift(),n(null,o)):(t.push(e(i)),void o(r,i))}):o(!0)}},t.leafFirst=function(n,e){var t=[],o=[];return t.push(r(n)),function n(r,i){t[0](r,function(r,c){return r?(t.shift(),o.length?i(null,o.shift()):i(!0)):(t.unshift(e(c)),o.unshift(c),void n(null,i))})}}}},{}],42:[function(n,e,t){(function(e){{var r=n("pull-core"),o=n("./sources"),i=n("./sinks"),c=r.prop,u=r.id,a=r.tester,s=(t.map=function(n,e){return e=c(e)||u,function(t,r){n(t,function(t,o){try{o=t?null:e(o)}catch(e){return n(e,function(){return r(e)})}r(t,o)})}},t.asyncMap=function(n,e){return e?function(t,r){return t?n(t,r):void n(null,function(n,t){return n?r(n,t):void e(t,r)})}:n},t.paraMap=function(n,e,t){function r(){if(i){var n=i;return i=null,u.length?n(null,u.shift()):c&&!a?n(c):void(i=n)}}function o(){n(null,function(n,i){return n?(c=n,r()):(a++,e(i,function(n,e){a--,u.push(e),r()}),void(t>a&&!c&&o()))})}if(!e)return n;var i,c=!1,u=[],a=0;return function(e,t){return e?n(e,t):(i=t,void(u.length||c?(o(),r()):o()))}},t.filter=function(n,e){return e=a(e),function t(r,o){for(var i,c=!0;c;)c=!1,i=!0,n(r,function(n,r){return n||e(r)?void o(n,r):i?c=!0:t(n,o)}),i=!1}}),f=(t.filterNot=function(n,e){return e=a(e),s(n,function(n){return!e(n)})},t.through=function(n,e,t){function r(n){!o&&t&&(o=!0,t(n===!0?null:n))}var o=!1;return function(t,o){return t&&r(t),n(t,function(n,t){n?r(n):e&&e(t),o(n,t)})}},t.take=function(n,e){var t=!1;if("number"==typeof e){var r=e;e=function(){return r--}}return function(r,o){return t?o(t):(t=r)?n(t,o):void n(null,function(r,i){return(t=t||r)?o(t):void(e(i)?o(null,i):(t=!0,n(!0,function(n,e){o(t,e)})))})}},t.unique=function(n,e,t){e=c(e)||u;var r={};return s(n,function(n){var o=e(n);return r[o]?!!t:(r[o]=!0,!t)})});t.nonUnique=function(n,e){return f(n,e,!0)},t.group=function(n,e){var t;e=e||5;var r=[];return function(o,i){return o?n(t=o,i):t?i(t):void n(null,function o(c,u){if(t=t||c){if(!r.length)return i(t);var a=r;return r=[],i(null,a)}if(r.push(u),r.length<e)return n(null,o);var a=r;r=[],i(null,a)})}},t.flatten=function(n){var e;return function(t,r){function i(){e(null,function(n,e){n?c():r(null,e)})}function c(){n(null,function(n,t){if(n)return r(n);if(Array.isArray(t)||t&&"object"==typeof t)t=o.values(t);else if("function"!=typeof t)throw new Error("expected stream of streams");e=t,i()})}e?i():c()}},t.prepend=function(n,e){return function(t,r){if(null!==e){if(t)return n(t,r);var o=e;e=null,r(null,o)}else n(t,r)}},t._reduce=function(n,e,t){return function(r,o){return r?n(r,o):ended?o(ended):void i.drain(function(n){t=e(t,n)},function(n,e){ended=n||!0,n?o(ended):o(null,t)})(n)}},e.nextTick,t.highWaterMark=function(n,t){function r(){for(;a.length&&(u.length||i);)a.shift()(i,i?null:u.shift());!u.length&&c&&(i=c)}function o(){return i||c||s||u.length>=t?void 0:(s=!0,n(i||c,function(n,e){s=!1,c=c||n,null!=e&&u.push(e),o(),r()}))}var i,c,u=[],a=[],s=!1;return t=t||10,e.nextTick(o),function(n,e){i=i||n,a.push(e),o(),r()}},t.flatMap=function(n,e){e=e||u;var t,r=[];return function(o,i){return r.length?i(null,r.shift()):t?i(t):void n(o,function o(c,u){if(c)t=c;else for(var a=e(u);a&&a.length;)r.push(a.shift());r.length?i(null,r.shift()):t?i(t):n(null,o)})}}}}).call(this,n("_process"))},{"./sinks":40,"./sources":41,_process:4,"pull-core":39}],43:[function(n,e,t){var r=n("cog/extend");e.exports=function(n){function e(e){var t=r({allow:!0},e);return n("peer:filter",e.id,t),t.allow}return function(t,o,i,c,u){var a,s=t[0];if(s&&s.id&&s.id!==n.id){if(!e(s))return;return a=n.peers.get(s.id),n("peer:connected",s.id,s),a?(r(a.data,s),n("peer:update",s,i)):(a={id:s.id,roleIdx:[s.id,n.id].sort().indexOf(s.id),data:{}},r(a.data,s),n.peers.set(s.id,a),n.autoreply&&!u&&n.to(s.id).send("/announce",n.attributes),n("peer:announce",s,a))}}}},{"cog/extend":6}],44:[function(n,e,t){function r(n){return"object"!=typeof n||n instanceof String?"function"==typeof n?null:n:JSON.stringify(n)}e.exports=function(n){return n.map(r).join("|")}},{}],45:[function(n,e,t){var r=n("cog/jsonparse");e.exports=function(e,t){function o(n,t,o){var i="message:"+n[0].slice(1),c=n.slice(2).map(r);e.apply(e,[i].concat(c).concat([t,o]))}var i={announce:n("./handlers/announce")(e,t)};return function(n){var t,c,u,a,s=n,f=!0,l=!1;if(!s||"primus"!==s.slice(0,6)){var p=e.id+"";if("/to"===s.slice(0,3)&&(f=s.slice(4,p.length+4)===p,f&&(t=s.slice(5+p.length).split("|").map(r),l=!0,t=t.map(r))),f&&(e("rawdata",s),t=t||s.split("|").map(r),"string"==typeof t[0])){if(u=t[1],u===e.id)return console.warn("got data from ourself, discarding");a=e.peers.get(u)||u,"/"===t[0].charAt(0)?(c=i[t[0].slice(1)],"function"==typeof c?c(t.slice(2),t[0].slice(1),u,a,l):o(t,a,n)):e("data",t.slice(0,1).concat(t.slice(2)),u,a,l)}}}}},{"./handlers/announce":43,"cog/jsonparse":8}],46:[function(n,e,t){var r=n("rtc-core/detect"),o=n("cog/extend"),i=n("cog/getable"),c=n("cuid"),u=n("mbus"),a=n("./prepare");e.exports=function(e,t){function s(n){return function(){var e=n.concat([].slice.call(arguments));e.splice(3,0,l.id),t(a(e))}}var f=(e||{}).autoreply,l=u("",(e||{}).logger),p=l.peers=i({}),d=l.attributes={browser:r.browser,browserVersion:r.browserVersion,agent:"unknown"};return l.id=(e||{}).id||c(),l.isMaster=function(n){var e=p.get(n);return e&&0!==e.roleIdx},l.send=function(){var n=[].slice.call(arguments);n.splice(1,0,l.id),t(a(n))},l.to=function(n){return{send:s(["/to",n])}},l._announce=function(){l.send("/announce",d),l("local:announce",d)},l._process=n("./process")(l),l._update=function(n){o(d,n,{id:l.id})},l.autoreply=void 0===f||f,l}},{"./prepare":44,"./process":45,"cog/extend":6,"cog/getable":7,cuid:29,mbus:26,"rtc-core/detect":18}],47:[function(n,e,t){var r=n("cog/extend");e.exports=function(e,t){return n("messenger-ws")(e,r({endpoints:(t||{}).endpoints||["/"]},t))}},{"cog/extend":6,"messenger-ws":48}],48:[function(n,e,t){var r=n("ws"),o=n("wsurl"),i=n("pull-ws"),c=(n("cog/defaults"),/\/$/),u=[];e.exports=function(n,e){function t(t){function c(){if(!b){if(0===w.length)return t(new Error("Unable to connect to url: "+n));v=new r(o(w.shift())),v.addEventListener("message",u),v.addEventListener("error",p),v.addEventListener("close",l),v.addEventListener("open",d),m=v.removeEventListener||v.removeListener,h=setTimeout(c,a)}}function u(){b||(clearTimeout(h),clearTimeout(g),m.call(v,"open",d),m.call(v,"close",l),m.call(v,"error",p),m.call(v,"message",u),b=!0,t(null,y,i.sink(v,e)))}function l(n){var e=n.wasClean&&(void 0===n.code||s.indexOf(n.code)<0);return e?(clearTimeout(g),void clearTimeout(h)):p()}function p(){clearTimeout(g),clearTimeout(h),c()}function d(){y=i.source(v,e),g=setTimeout(u,100)}var v,h,g,m,y,w=[].concat(f),b=!1;c()}var a=(e||{}).timeout||1e3,s=(e||{}).failcodes||u,f=((e||{}).endpoints||["/"]).map(function(e){return n.replace(c,"")+e});return t}},{"cog/defaults":5,"pull-ws":49,ws:54,wsurl:55}],49:[function(n,e,t){function r(n,e){return{source:t.source(n),sink:t.sink(n,e)}}t=e.exports=r,t.source=n("./source"),t.sink=n("./sink")},{"./sink":52,"./source":53}],50:[function(n,e,t){function r(n){return"function"!=typeof n?n:(n.pipe=n.pipe||function(e){if("function"!=typeof e&&"function"!=typeof e.sink)throw new Error("must pipe to reader");var t=r(e.sink?e.sink(n):e(n));return e.source||t},n.type="Source",n)}t.id=function(n){return n},t.prop=function(n){if("string"==typeof n){var e=n;return function(n){return n[e]}}return n},t.tester=function(n){return n?"object"==typeof n&&"function"==typeof n.test?n.test.bind(n):t.prop(n)||t.id:t.id},t.addPipe=r;var o=(t.Source=function(n){function e(){var e=[].slice.call(arguments);return r(n.apply(null,e))}return e.type="Source",e},t.Through=function(n){return function(){function e(e){for(t.unshift(e),e=n.apply(null,t);r.length;)e=r.shift()(e);return e}var t=[].slice.call(arguments),r=[];return e.pipe=function(n){if(r.push(n),"Source"===n.type)throw new Error("cannot pipe "+e.type+" to Source");return e.type="Sink"===n.type?"Sink":"Through",e},e.type="Through",e}}),i=t.Sink=function(n){return function(){function e(e){return t.unshift(e),n.apply(null,t)}var t=[].slice.call(arguments);if(!n)throw new Error("must be createReader function");return e.type="Sink",e}};t.maybeSink=t.maybeDrain=function(n,e){return e?i(function(t){return n(e)(t)})():o(function(e){var t;return function(r,o){return r?e(r,o):t?o(t):void n(function(n,e){t=n||!0,n?o(t):o(null,e)})(e)}})()}},{}],51:[function(n,e,t){e.exports=function(n,e){function t(){"function"==typeof i&&(i.call(n,"open",r),i.call(n,"error",o))}function r(n){t(),e()}function o(n){t(),e(n)}var i=n&&(n.removeEventListener||n.removeListener);return n.readyState>=2?e(!0):1===n.readyState?e():(n.addEventListener("open",r),void n.addEventListener("error",o))}},{}],52:[function(n,e,t){(function(t){var r=n("pull-core"),o=n("./ready");e.exports=r.Sink(function(n,e,r){function i(r,a){return r?void(c&&e.readyState<=1&&(u&&e.addEventListener("close",function(n){if(n.wasClean)u();else{var e=new Error("ws error");e.event=n,u(e)}}),e.close())):void o(e,function(r){return r?n(r,function(){}):(e.send(a),void t.nextTick(function(){n(null,i)}))})}r=r||{};var c=r.closeOnEnd!==!1,u="function"==typeof r?r:r.onClose;n(null,i)})}).call(this,n("_process"))},{"./ready":51,_process:4,"pull-core":50}],53:[function(n,e,t){var r=n("pull-core"),o=n("./ready");e.exports=r.Source(function(n){function e(e,c){return t=null,r?c(r):e?(t=c,n.close()):void o(n,function(n){return n?c(r=n):r&&r!==!0?c(r):i.length>0?c(null,i.shift()):r?c(!0):void(t=c)})}var t,r,i=[];return n.addEventListener("message",function(n){return t?t(null,n.data):void i.push(n.data)}),n.addEventListener("close",function(n){return r?void 0:t?t(r=!0):void 0}),n.addEventListener("error",function(n){r||(r=n,t&&t(r))}),e})},{"./ready":51,"pull-core":50}],54:[function(n,e,t){function r(n,e,t){var r;return r=e?new i(n,e):new i(n)}var o=function(){return this}(),i=o.WebSocket||o.MozWebSocket;e.exports=i?r:null,i&&(r.prototype=i.prototype)},{}],55:[function(n,e,t){var r=/^http(.*)$/;e.exports=function(n,e){var t=(e||{}).current||"undefined"!=typeof location&&location.href,o=t&&t.slice(0,t.indexOf(":")),i=(e||{}).insecure,c="//"==n.slice(0,2),u=!o||"file:"===o;return c?u?(i?"ws:":"wss:")+n:o.replace(r,"ws$1")+":"+n:n.replace(r,"ws$1")}},{}],56:[function(n,e,t){"use strict";var r=n("cog/logger")("rtc/cleanup"),o=["closed"],i=["addstream","datachannel","icecandidate","negotiationneeded","removestream","signalingstatechange"],c=["iceconnectionstatechange"];e.exports=function(n){function e(e){e.forEach(function(e){n["on"+e]&&(n["on"+e]=null)})}var t=n.iceConnectionState,u=o.indexOf(t)<0;e(i),u&&(r("attempting connection close, current state: "+n.iceConnectionState),n.close()),setTimeout(function(){e(c)},100)}},{"cog/logger":9}],57:[function(n,e,t){"use strict";function r(e,t,r,s){function d(){S("decoupling "+r.id+" from "+t),A.stop(),c(e),r.removeListener("sdp",h),r.removeListener("candidate",v),r.removeListener("negotiate",b),r.removeListener("message:sdp",h),r.removeListener("message:candidate",v),r.removeListener("message:negotiate",b)}function v(n){F.addIceCandidate(n)}function h(n,e){E("sdp.remote",n),e&&e.id===t&&F.setRemoteDescription(n)}function g(){S("captured pc close, iceConnectionState = "+e.iceConnectionState),d()}function m(){S("captured pc disconnect, monitoring connection status"),k=setTimeout(function(){S("manually closing connection after disconnect timeout"),c(e)},C),A.on("statechange",y)}function y(){return S("connection state changed to: "+e.iceConnectionState),p.indexOf(e.iceConnectionState)>=0?void 0:(x(),l.indexOf(e.iceConnectionState)>=0?A("closed"):void A.once("disconnect",m))}function w(n){var e=n.candidate&&f(n.candidate);n.candidate?(x(),E("ice.local",e),r.to(t).send("/candidate",e),T=!1):T||(T=!0,E("ice.gathercomplete"),r.to(t).send("/endofcandidates",{}))}function b(n){n.id===t&&(E("negotiate.request",n.id),M())}function x(){A.off("statechange",y),S("reset disconnect timer, state: "+e.iceConnectionState),clearTimeout(k)}var k,_=(s||{}).debugLabel||"rtc",S=n("cog/logger")(_+"/couple"),A=u(e,t,r,(s||{}).logger),E=o("",A),L=(s||{}).reactive,T=!0,C=(s||{}).disconnectTimeout||1e4,O=r.isMaster(t),F=i(e,s),D=a(function(){return O?void F.createOffer():r.to(t).send("/negotiate")},100,{leading:!1}),M=a(F.createOffer,100,{leading:!1});return L&&(e.onnegotiationneeded=function(){E("negotiate.renegotiate"),D()}),e.onicecandidate=w,F.on("sdp.local",function(n){r.to(t).send("/sdp",n)}),r.on("sdp",h),r.on("candidate",v),r.on("message:sdp",h),r.on("message:candidate",v),O&&(r.on("negotiate",b),r.on("message:negotiate",b)),A.once("closed",g),A.once("disconnected",m),A.createOffer=D,A}var o=n("mbus"),i=n("rtc-taskqueue"),c=n("./cleanup"),u=n("./monitor"),a=n("cog/throttle"),s=n("whisk/pluck"),f=s("candidate","sdpMid","sdpMLineIndex"),l=["closed","failed"],p=["checking"];e.exports=r},{"./cleanup":56,"./monitor":61,"cog/logger":9,"cog/throttle":10,mbus:26,"rtc-taskqueue":62,"whisk/pluck":74}],58:[function(n,e,t){"use strict";e.exports=n("rtc-core/detect")},{"rtc-core/detect":18}],59:[function(n,e,t){"use strict";var r=n("cog/logger")("generators"),o=n("./detect"),i=n("cog/defaults"),c={create:{dtls:function(n){o.moz||(n.optional=(n.optional||[]).concat({DtlsSrtpKeyAgreement:!0}))}}};t.config=function(n){var e=(n||{}).iceServerGenerator;return i({},n,{iceServers:"function"==typeof e?e():[]})},t.connectionConstraints=function(n,e){var t,o={},u=c.create;return Object.keys(n||{}).forEach(function(n){u[n]&&u[n](o)}),t=i({},e,o),r("generated connection constraints: ",t),t}},{"./detect":58,"cog/defaults":5,"cog/logger":9}],60:[function(n,e,t){"use strict";var r=n("./generators"),o=t.detect=n("./detect"),i=n("rtc-core/plugin");t.logger=n("cog/logger");var c=t.RTCPeerConnection=o("RTCPeerConnection");t.couple=n("./couple"),t.createConnection=function(n,e){var t=i((n||{}).plugins),o=(n||{}).RTCPeerConnection||c,u=r.config(n);return e=r.connectionConstraints(n,e),t&&"function"==typeof t.createConnection?t.createConnection(u,e):new o(u,e)}},{"./couple":57,"./detect":58,"./generators":59,"cog/logger":9,"rtc-core/plugin":21}],61:[function(n,e,t){"use strict";function r(n){return i[n]||n}var o=n("mbus"),i={completed:"connected"},c=["signalingstatechange","iceconnectionstatechange"];e.exports=function(n,e,t,i){function u(){var e=r(n.iceConnectionState);f("statechange",n,e),s!==e&&(f(e),s=e)}function a(){f("closed")}var s,f=o("",i);return n.onclose=a,c.forEach(function(e){n["on"+e]=u}),f.stop=function(){n.onclose=null,c.forEach(function(e){n["on"+e]=null})},f.checkState=u,n?(s=r(n.iceConnectionState),f):f}},{mbus:26}],62:[function(n,e,t){var r=n("rtc-core/detect"),o=n("rtc-core/plugin"),i=n("priorityqueuejs"),c=n("whisk/pluck"),u=c("sdp","type"),a=n("rtc-validator/candidate"),s=n("rtc-sdpclean"),f=n("rtc-sdp"),l=100,p=1e3,d=["candidate","setLocalDescription","setRemoteDescription","createAnswer","createOffer"],v={setLocalDescription:"setlocaldesc",setRemoteDescription:"setremotedesc",createOffer:"offer",createAnswer:"answer"},h={data:"application"},g=["have-remote-offer","have-local-pranswer"];e.exports=function(e,t){function c(n,t){function r(){I("ice.remote.applied",c),t()}function o(n){I("ice.remote.invalid",c),t(n)}var i=n.args[0],c=i&&i.candidate&&b(i);return c?void e.addIceCandidate(c,r,o):t()}function m(){var n=!q.isEmpty()&&!R&&q.peek(),t=n&&M(n),r=!q.isEmpty()&&C(e);return P=0,t?(R=q.deq(),void R.fn(R,function(n){var e=R.fail||N,t=R.pass,r=R.name;return n?(console.error(r+" task failed: ",n),e(n)):("function"==typeof t&&t.apply(R,[].slice.call(arguments,1)),void setTimeout(function(){R=null,j()},0))})):r&&j()}function y(n){var t=[],r=n&&s(n.sdp,{collector:t});return n&&r!==n.sdp&&(console.info("invalid lines removed from sdp: ",t),n.sdp=r),"function"==typeof z&&(n.sdp=z(n.sdp,e)),n}function w(){return g.indexOf(e.signalingState)>=0?I.createAnswer():void 0}function b(n){return $&&"function"==typeof $.createIceCandidate?$.createIceCandidate(n):new B(n)}function x(n){return $&&"function"==typeof $.createSessionDescription?$.createSessionDescription(n):new V(n)}function k(){I("sdp.local",u(this.args[0]))}function _(n,e,t){return function(){var r=[].slice.call(arguments);t&&"function"==typeof t.processArgs&&(r=r.map(t.processArgs)),q.enq({args:r,name:n,fn:e,checks:[C].concat((t||{}).checks||[]),pass:(t||{}).pass,fail:(t||{}).fail}),j()}}function S(n,t){function r(e){I.apply(I,["negotiate.error",n.name,e].concat(n.args)),t(e)}function o(){I.apply(I,[["negotiate",c,"ok"],n.name].concat(n.args)),t.apply(null,[null].concat([].slice.call(arguments)))}var i=e[n.name],c=v[n.name]||(n.name||"").toLowerCase(),u=[o,r],a="createOffer"===n.name;return i?(I.apply(I,["negotiate."+c].concat(n.args)),void i.apply(e,n.args.concat(u).concat(a?E():[]))):t(new Error('cannot call "'+n.name+'" on RTCPeerConnection'))}function A(n){for(;n&&n.candidate&&n.candidate.candidate;)n=n.candidate;return n}function E(){var n={offertoreceivevideo:"OfferToReceiveVideo",offertoreceiveaudio:"OfferToReceiveAudio",icerestart:"IceRestart",voiceactivitydetection:"VoiceActivityDetection"},e={OfferToReceiveVideo:!0,OfferToReceiveAudio:!0};return Object.keys(t||{}).forEach(function(r){n[r.toLowerCase()]&&(e[n[r.toLowerCase()]]=t[r])}),{mandatory:e}}function L(n,e){return n.__hasDesc||(n.__hasDesc=!!n.remoteDescription)}function T(n){return"have-local-offer"!==n.signalingState}function C(n){return"closed"!==n.signalingState}function O(n,e){return e.__valid||(e.__valid=0===a(e.args[0]).length)}function F(n,e){var t=f(n.remoteDescription&&n.remoteDescription.sdp),r=t.getMediaTypes(),o=e.args[0]&&e.args[0].sdpMid;return o=h[o]||o,""===o||r.indexOf(o)>=0}function D(n,e){var t=[n,e],r=t.map(M),o=t.map(function(n,e){var t=r[e],o=t&&U.indexOf(n.name);return t?o>=0?o:l:p});return o[1]-o[0]}function M(n){return(n.checks||[]).reduce(function(t,r){return t&&r(e,n)},!0)}function j(){P||(P=setTimeout(m,50))}var R,q=new i(D),I=n("mbus")("",(t||{}).logger),U=(t||{}).priorities||d,$=o((t||{}).plugins),P=0,N=I.bind(I,"fail"),z=(t||{}).sdpfilter||(t||{}).sdpFilter,V=(t||{}).RTCSessionDescription||r("RTCSessionDescription"),B=(t||{}).RTCIceCandidate||r("RTCIceCandidate");return I.addIceCandidate=_("addIceCandidate",c,{processArgs:A,checks:[L,O,F]}),I.setLocalDescription=_("setLocalDescription",S,{processArgs:y,pass:k}),I.setRemoteDescription=_("setRemoteDescription",S,{processArgs:x,pass:w}),I.createOffer=_("createOffer",S,{checks:[T],pass:I.setLocalDescription}),I.createAnswer=_("createAnswer",S,{pass:I.setLocalDescription}),I}},{mbus:26,priorityqueuejs:63,"rtc-core/detect":18,"rtc-core/plugin":21,"rtc-sdp":64,"rtc-sdpclean":66,"rtc-validator/candidate":67,"whisk/pluck":74}],63:[function(n,e,t){function r(n){this._comparator=n||r.DEFAULT_COMPARATOR,this._elements=[]}e.exports=r,r.DEFAULT_COMPARATOR=function(n,e){return"number"==typeof n&&"number"==typeof e?n-e:(n=n.toString(),e=e.toString(),n==e?0:n>e?1:-1)},r.prototype.isEmpty=function(){return 0===this.size()},r.prototype.peek=function(){if(this.isEmpty())throw new Error("PriorityQueue is empty");return this._elements[0]},r.prototype.deq=function(){var n=this.peek(),e=this._elements.pop(),t=this.size();if(0===t)return n;this._elements[0]=e;for(var r=0;t>r;){var o=r,i=2*r+1,c=2*r+2;if(t>i&&this._compare(i,o)>=0&&(o=i),t>c&&this._compare(c,o)>=0&&(o=c),o===r)break;this._swap(o,r),r=o}return n},r.prototype.enq=function(n){for(var e=this._elements.push(n),t=e-1;t>0;){var r=Math.floor((t-1)/2);if(this._compare(t,r)<=0)break;this._swap(r,t),t=r}return e},r.prototype.size=function(){return this._elements.length},r.prototype.forEach=function(n){return this._elements.forEach(n)},r.prototype._compare=function(n,e){return this._comparator(this._elements[n],this._elements[e])},r.prototype._swap=function(n,e){var t=this._elements[n];this._elements[n]=this._elements[e],this._elements[e]=t}},{}],64:[function(n,e,t){"use strict";var r=n("whisk/nub"),o=n("whisk/pluck"),i=n("whisk/flatten"),c=/\r?\n/,u=/\r?\n$/,a=["a","c","b","k"],s=n("./parsers");e.exports=function(n){var e,t={},f=[],l=n.split(c).filter(Boolean).map(function(n){return n.split("=")}),p=(r(l.filter(function(n){return n[0]&&a.indexOf(n[0])<0}).map(o(0))),t.findLine=function(n,e){var t=f.filter(function(e){return e[0]===n})[e||0];return t&&t[1]});return l.forEach(function(n){var t=s[n[0]];t?e=t(f,n):e?e=e(n):f.push(n)}),t.addIceCandidate=function(n){var e=(n||{}).lineIndex||(n||{}).sdpMLineIndex,t="undefined"!=typeof e&&p("m",e),r=(n||{}).candidate;t&&r&&t.childlines.push(r.replace(u,"").split("="))},t.getMediaTypes=function(){function n(n){return n[1].def.split(/\s/)[0]}return f.filter(function(n){return"m"===n[0]&&n[1]&&n[1].def}).map(n)},t.toString=function(){return f.map(function(n){return"function"==typeof n[1].toArray?n[1].toArray():[n]}).reduce(i).map(function(n){return n.join("=")}).join("\n")},t}},{"./parsers":65,"whisk/flatten":71,"whisk/nub":73,"whisk/pluck":74}],65:[function(n,e,t){"use strict";t.m=function(n,e){function t(n){return r.childlines.push(n),t}var r={def:e[1],childlines:[],toArray:function(){return[["m",r.def]].concat(r.childlines)}};return n.push(["m",r]),t}},{}],66:[function(n,e,t){function r(n){var e=i.exec(n);return e&&e[0]}var o=[[/^(a\=candidate.*)$/,n("rtc-validator/candidate")]],i=/(\r?\n|\\r\\n)/;e.exports=function(n,e){var t=r(n),i=n.split(t),c=(e||{}).collector;return i=i.filter(function(n){var e=o.reduce(function(e,t,r){return"undefined"!=typeof e?e:t[0].exec(n)&&{line:n.replace(t[0],"$1"),fn:t[1]}},void 0),t=e?e.fn(e.line):[];return c&&t.forEach(function(n){c.push(n)}),0===t.length}),i.join(t)}},{"rtc-validator/candidate":67}],67:[function(n,e,t){function r(n,e){var t=c[e];return t&&!t[0].test(n)?(o(t[2]+" part failed validation: "+n),new Error(t[1])):void 0}var o=n("cog/logger")("rtc-validator"),i=/^(?:a=)?candidate:/,c=[[/.+/,"invalid foundation component","foundation"],[/\d+/,"invalid component id","component-id"],[/(UDP|TCP)/i,"transport must be TCP or UDP","transport"],[/\d+/,"numeric priority expected","priority"],[n("reu/ip"),"invalid connection address","connection-address"],[/\d+/,"invalid connection port","connection-port"],[/typ/,'Expected "typ" identifier',"type classifier"],[/.+/,"Invalid candidate type specified","candidate-type"]];e.exports=function(n){var e=[],t=n&&(n.candidate||n),o=t&&i.exec(t),c=o&&t.slice(o[0].length).split(/\s/);return t?o?e=e.concat(c.map(r)).filter(Boolean):[new Error("candidate did not match expected sdp line format")]:[new Error("empty candidate")]}},{"cog/logger":9,"reu/ip":68}],68:[function(n,e,t){e.exports=/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$|^(?:(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){6})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:::(?:(?:(?:[0-9a-fA-F]{1,4})):){5})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){4})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,1}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){3})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,2}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:(?:[0-9a-fA-F]{1,4})):){2})(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,3}(?:(?:[0-9a-fA-F]{1,4})))?::(?:(?:[0-9a-fA-F]{1,4})):)(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,4}(?:(?:[0-9a-fA-F]{1,4})))?::)(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9]))\.){3}(?:(?:25[0-5]|(?:[1-9]|1[0-9]|2[0-4])?[0-9])))))))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,5}(?:(?:[0-9a-fA-F]{1,4})))?::)(?:(?:[0-9a-fA-F]{1,4})))|(?:(?:(?:(?:(?:(?:[0-9a-fA-F]{1,4})):){0,6}(?:(?:[0-9a-fA-F]{1,4})))?::))))$/},{}],69:[function(n,e,t){e.exports=function(n){return n=[].concat(n||[]).concat([].slice.call(arguments,1)),function(e){return n.reduce(function(n,e){var t=e(n);return void 0!==t?t:n},e||0)}}},{}],70:[function(n,e,t){e.exports=function(n,e){return arguments.length>1?n===e:function(e){return n===e}}},{}],71:[function(n,e,t){e.exports=function(n,e){return n=Array.isArray(n)?n:[n],n.concat(e)}},{}],72:[function(n,e,t){e.exports=function(n){return function(e){for(var t=[],r=0,o=e.length;o>r;r++){for(var i=!1,c=t.length;c--;)i=i||n(e[r],t[c]);i||(t[t.length]=e[r])}return t}}},{}],73:[function(n,e,t){e.exports=n("./nub-by")(n("./equality"))},{"./equality":70,"./nub-by":72}],74:[function(n,e,t){e.exports=function(){function n(n,e){return function(t){var r=0,o=t;do o=o&&o[n[r++]];while(o&&e>=r);return o}}var e=[];return[].slice.call(arguments).forEach(function(n){var t="number"==typeof n?[n]:(n||"").split(".");e[e.length]={name:t[0],parts:t,maxIdx:t.length-1}}),e.length<=1?n(e[0].parts,e[0].maxIdx):function(t){for(var r={},o=0,i=e.length;i>o;o++)r[e[o].name]=n([e[o].parts[0]],0)(t);return r}}},{}]},{},[2])(2)});
//# sourceMappingURL=rtc.min.js.map